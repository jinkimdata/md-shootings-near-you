"undefined"==typeof console&&(this.console={log:function(t){}}),L.Control.OSMGeocoder=L.Control.extend({options:{collapsed:!0,position:"topright",text:"Locate",bounds:null,email:null,callback:function(t){if(0==t.length)return void console.log("ERROR: didn't find a result");var o=t[0].boundingbox,e=new L.LatLng(o[0],o[2]),n=new L.LatLng(o[1],o[3]),i=new L.LatLngBounds([e,n]);this._map.fitBounds(i)}},_callbackId:0,initialize:function(t){L.Util.setOptions(this,t)},onAdd:function(t){this._map=t;var o="leaflet-control-geocoder",e=this._container=L.DomUtil.create("div",o);L.DomEvent.disableClickPropagation(e);var n=this._form=L.DomUtil.create("form",o+"-form"),i=this._input=document.createElement("input");if(i.type="text",n.appendChild(i),$(i).attr("placeholder","Enter address"),L.DomEvent.addListener(n,"submit",this._geocode,this),this.options.collapsed){L.DomEvent.addListener(e,"mouseover",this._expand,this),L.DomEvent.addListener(e,"mouseout",this._collapse,this);var s=this._layersLink=L.DomUtil.create("a",o+"-toggle",e);s.href="#",s.title="Nominatim Geocoder",L.DomEvent.addListener(s,L.Browser.touch?"click":"focus",this._expand,this),this._map.on("movestart",this._collapse,this)}else this._expand();return e.appendChild(n),e},_createSearchResult:function(t,o){var e=.005,n=[];return n[0]={},n[0].boundingbox=[parseFloat(t)-e,parseFloat(t)+e,parseFloat(o)-e,parseFloat(o)+e],n[0]["class"]="boundary",n[0].display_name="Position: "+t+" "+o,n[0].lat=t,n[0].lon=o,n},_isLatLon:function(t){var o=/(-?\d+\.\d+)\s(-?\d+\.\d+)/,e=o.exec(t);return void 0!=e?e:(o=/lat\D*(-?\d+\.\d+)\D*lon\D*(-?\d+\.\d+)/,e=o.exec(t),void 0!=e?e:null)},_isLatLon_decMin:function(t){return console.log("is LatLon?: "+t),re=/([ns])\s*(\d+)\D*(\d+\.\d+).?\s*([ew])\s*(\d+)\D*(\d+\.\d+)/i,m=re.exec(t.toLowerCase()),void 0!=m?m:null},_geocode:function(t){L.DomEvent.preventDefault(t);var o=this._input.value;if(null!=this._isLatLon(o)){var e=this._isLatLon(o);return console.log("LatLon: "+e[1]+" "+e[2]),void this.options.callback.call(this,this._createSearchResult(e[1],e[2]))}if(null!=this._isLatLon_decMin(o)){var e=this._isLatLon_decMin(o),n=new Array;return n.n=1,n.s=-1,n.e=1,n.w=-1,void this.options.callback.call(this,this._createSearchResult(n[e[1]]*(Number(e[2])+e[3]/60),n[e[4]]*(Number(e[5])+e[6]/60)))}console.log(this._callbackId),window["_l_osmgeocoder_"+this._callbackId]=L.Util.bind(this.options.callback,this);var i={q:this._input.value,json_callback:"_l_osmgeocoder_"+this._callbackId++,format:"json"};if(this.options.bounds&&null!=this.options.bounds){if(!(this.options.bounds instanceof L.LatLngBounds))return void console.log("bounds must be of type L.LatLngBounds");i.viewbox=this.options.bounds.toBBoxString(),i.bounded=1}this.options.email&&null!=this.options.email&&("string"==typeof this.options.email?i.email=this.options.email:console.log("email must be a string"));var s=location.protocol,a=s+"//nominatim.openstreetmap.org/search"+L.Util.getParamString(i),l=document.createElement("script");l.type="text/javascript",l.src=a,l.id=this._callbackId,document.getElementsByTagName("head")[0].appendChild(l)},_expand:function(){L.DomUtil.addClass(this._container,"leaflet-control-geocoder-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-geocoder-expanded","")}});